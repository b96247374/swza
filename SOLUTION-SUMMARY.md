# ููุฎุต ุญู ูุดููุฉ ุฅุถุงูุฉ ุงููุณุชุฎุฏููู

## ๐ ุงููุดููุฉ ุงูููุชุดูุฉ
```
โ ูุดู ูู ุงุฎุชุจุงุฑ Firestore: [FirebaseError: Missing or insufficient permissions.]
ููุฏ ุงูุฎุทุฃ: permission-denied
```

## ๐ฏ ุงูุณุจุจ
**ููุงุนุฏ Firestore ุชููุน ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

## ๐ ุงูุญู ุงูุณุฑูุน

### ุงูุฎุทูุฉ 1: ุชุนุฏูู ููุงุนุฏ Firestore
1. ุงุฐูุจ ุฅูู [Firebase Console](https://console.firebase.google.com)
2. ุงุฎุชุฑ ูุดุฑูุนู: **daily-receiving-report-system**
3. ุงุฐูุจ ุฅูู **Firestore Database** > **Rules**
4. ุงุณุชุจุฏู ุงูููุงุนุฏ ุจู:
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}
```
5. ุงุถุบุท **Publish**

### ุงูุฎุทูุฉ 2: ุงุฎุชุจุงุฑ ุงูุญู
```bash
node test-firestore-connection.js
```

### ุงูุฎุทูุฉ 3: ุฅุถุงูุฉ ูุณุชุฎุฏู
```bash
node add-user-now.js
```

## ๐ ุงููููุงุช ุงููุชุงุญุฉ

| ุงูููู | ุงููุตู |
|-------|-------|
| `FIX-FIRESTORE-RULES.md` | ุฅุฑุดุงุฏุงุช ููุตูุฉ ูุชุนุฏูู ููุงุนุฏ Firestore |
| `test-firestore-connection.js` | ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจู Firestore |
| `add-user-now.js` | ุฅุถุงูุฉ ูุณุชุฎุฏู ูุงุญุฏ |
| `add-users-batch.js` | ุฅุถุงูุฉ ุนุฏุฉ ูุณุชุฎุฏููู |
| `QUICK-FIX-USERS.md` | ุญููู ุณุฑูุนุฉ ุฃุฎุฑู |

## โ ุจุนุฏ ุญู ุงููุดููุฉ

1. **ุงุฎุชุจุฑ ุฅุถุงูุฉ ุงููุณุชุฎุฏููู** ูู ูุงุฌูุฉ ุงููุธุงู
2. **ุงุฎุชุจุฑ ุชุณุฌูู ุงูุฏุฎูู** ุจุงููุณุชุฎุฏููู ุงูุฌุฏุฏ
3. **ุชุญูู ูู ุฌููุน ุงููุธุงุฆู** (ุงูุชูุงุฑูุฑุ ุงูุฅุฌุงุฒุงุชุ ุฅูุฎ)

## ๐ ููุงุญุธุฉ ุงูุฃูุงู
ุงูููุงุนุฏ ุงูุญุงููุฉ ุชุณูุญ ุจุงููุตูู ููุฌููุน (ููุงุณุจุฉ ููุชุทููุฑ). 
ููุงุณุชุฎุฏุงู ุงูุฅูุชุงุฌูุ ุงุณุชุฎุฏู ููุงุนุฏ ุฃูุซุฑ ุฃูุงูุงู.

## ๐ ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ
1. ุชุญูู ูู Console ุงููุชุตูุญ (F12)
2. ุชุฃูุฏ ูู ุชุนุฏูู ููุงุนุฏ Firestore
3. ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
4. ุฑุงุฌุน ููู `FIX-FIRESTORE-RULES.md` ููุญููู ุงูุชูุตูููุฉ 

# ููุฎุต ุฅุตูุงุญ ุงูุตูุงุญูุงุช - ูุธุงู ุงูุชูุงุฑูุฑ ุงูููููุฉ

## ุงููุดููุฉ
ูู ูุชู ุชูุนูู ุฌููุน ุตูุงุญูุงุช ุงูุฃูุณุงู ูุงููุธุงู ููุญุณุงุจ ุงูุงูุชุฑุงุถู (admin/123456).

## ุงูุญููู ุงููุทุจูุฉ

### 1. ุชุญุฏูุซ ุตูุงุญูุงุช ุงููุณุชุฎุฏู ุงูุงูุชุฑุงุถู

#### ูู `src/hooks/useUsers.js`:
- ุชู ุฅุถุงูุฉ ุฌููุน ุงูุตูุงุญูุงุช ุงููุทููุจุฉ ูููุณุชุฎุฏู ุงูุงูุชุฑุงุถู:
  - **ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู**: `canManageUsers`, `canAddUsers`, `canEditUsers`, `canDeleteUsers`, `canViewUsers`
  - **ุงูุชูุงุฑูุฑ**: `canSubmitReports`, `canViewReports`, `canEditReports`, `canDeleteReports`, `canReview`, `canApproveReports`, `canArchiveReports`
  - **ุงูุฅุฌุงุฒุงุช**: `canManageLeaves`, `canViewLeaves`, `canApproveLeaves`, `canRequestLeave`, `canEditLeaves`, `canDeleteLeaves`
  - **ุงูุฃุนุฐุงุฑ**: `canRequestExcuse`, `canViewExcuses`, `canApproveExcuses`, `canManageExcuses`
  - **ุงููุณุชูุฏุงุช**: `canManageDocuments`, `canViewDocuments`, `canEditDocuments`, `canDeleteDocuments`, `canUploadDocuments`
  - **ุงููุฑุงุฑุงุช**: `canManageDecisions`, `canViewDecisions`, `canCreateDecisions`, `canEditDecisions`, `canDeleteDecisions`
  - **ุงูุฎุทุงุจุงุช**: `canManageLetters`, `canViewLetters`, `canCreateLetters`, `canEditLetters`, `canDeleteLetters`
  - **ุฅุนุฏุงุฏุงุช ุงููุธุงู**: `canManageSettings`, `canViewSettings`, `canEditSettings`
  - **ุงูุตูุงุญูุงุช ุงูุนุงูุฉ**: `isAdmin`, `isCommander`, `isSupervisor`, `isUser`

#### ูู `src/hooks/useAuth.js`:
- ุชู ุชุทุจูู ููุณ ุงูุตูุงุญูุงุช ุงูุดุงููุฉ ูููุณุชุฎุฏู ุงูุซุงุจุช ูู ูุธุงู ุงููุตุงุฏูุฉ

### 2. ุฅุตูุงุญ ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูู ุงูููููุงุช

#### ูู `src/components/user/UserManagement.jsx`:
- ุชู ุฅุตูุงุญ ุดุฑุท ุงูุตูุงุญูุงุช ูู `currentUser.permissions.includes('manageUsers')` ุฅูู `currentUser.permissions?.canManageUsers`

#### ูู `src/components/shared/Sidebar.jsx`:
- ุชู ุฅุถุงูุฉ ุชุญูู ุดุงูู ูู ุงูุตูุงุญูุงุช ููู ูุณู ูู ุงูุดุฑูุท ุงูุฌุงูุจู
- ุชู ุฅุถุงูุฉ ุดุฑูุท ุฎุงุตุฉ ููุฑูุงุจุท ุงูุฅุถุงููุฉ (ุณุฌู ุงูุญุฐูุ ุฎุทุงุจุงุช ุงูุดูุฑุ ุฅุตุฏุงุฑ ุงููุฑุงุฑุงุชุ ูุญุฑุฑ ุงููุณุชูุฏุงุช)

#### ูู `src/components/leave/LeaveManagement.jsx`:
- ุชู ุฅุถุงูุฉ ุชุญูู ูู ุงูุตูุงุญูุงุช ูู ุจุฏุงูุฉ ุงููููู
- ูุชุญูู ูู `canManageLeaves`, `canViewLeaves`, `isAdmin`, ุฃู ุฏูุฑ `commander`/`admin`

#### ูู `src/components/leave/LeaveCard.jsx`:
- ุชู ุฅุตูุงุญ ุดุฑุท ุญุฐู ุงูุฅุฌุงุฒุงุช ูู `canDeleteReports` ุฅูู `canDeleteLeaves`
- ุชู ุฅุตูุงุญ ุดุฑุท ูุฑุงุฌุนุฉ ุงููุงุฆุฏ ููุดูู `canApproveLeaves` ู `isAdmin`

#### ูู `src/components/leave/UserLeaveView.jsx`:
- ุชู ุฅุถุงูุฉ ุชุญูู ูู ุงูุตูุงุญูุงุช ูู ุจุฏุงูุฉ ุงููููู
- ูุชุญูู ูู `canRequestLeave`, `canViewLeaves`, `isAdmin`, ุฃู ุฏูุฑ `commander`/`admin`

#### ูู `src/components/leave/ExcuseForm.jsx`:
- ุชู ุฅุตูุงุญ ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ููุนูู ูุน ุงูุตูุงุญูุงุช ุงููุนููุฉ ุจุฏูุงู ูู `USER_TYPE`
- ูุชุญูู ูู `canManageExcuses`, `canApproveExcuses`, `isAdmin`, ุฃู ุฏูุฑ `commander`/`admin`

### 3. ุงูุตูุงุญูุงุช ุงูุฌุฏูุฏุฉ ุงููุถุงูุฉ

#### ุตูุงุญูุงุช ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู:
- `canAddUsers`: ุฅุถุงูุฉ ูุณุชุฎุฏููู ุฌุฏุฏ
- `canEditUsers`: ุชุนุฏูู ุจูุงูุงุช ุงููุณุชุฎุฏููู
- `canDeleteUsers`: ุญุฐู ุงููุณุชุฎุฏููู
- `canViewUsers`: ุนุฑุถ ูุงุฆูุฉ ุงููุณุชุฎุฏููู

#### ุตูุงุญูุงุช ุงูุชูุงุฑูุฑ:
- `canViewReports`: ุนุฑุถ ุงูุชูุงุฑูุฑ
- `canEditReports`: ุชุนุฏูู ุงูุชูุงุฑูุฑ
- `canApproveReports`: ุงูููุงููุฉ ุนูู ุงูุชูุงุฑูุฑ
- `canArchiveReports`: ุฃุฑุดูุฉ ุงูุชูุงุฑูุฑ

#### ุตูุงุญูุงุช ุงูุฅุฌุงุฒุงุช:
- `canApproveLeaves`: ุงูููุงููุฉ ุนูู ุงูุฅุฌุงุฒุงุช
- `canRequestLeave`: ุทูุจ ุฅุฌุงุฒุฉ
- `canEditLeaves`: ุชุนุฏูู ุงูุฅุฌุงุฒุงุช
- `canDeleteLeaves`: ุญุฐู ุงูุฅุฌุงุฒุงุช

#### ุตูุงุญูุงุช ุงูุฃุนุฐุงุฑ:
- `canViewExcuses`: ุนุฑุถ ุงูุฃุนุฐุงุฑ
- `canApproveExcuses`: ุงูููุงููุฉ ุนูู ุงูุฃุนุฐุงุฑ
- `canManageExcuses`: ุฅุฏุงุฑุฉ ุงูุฃุนุฐุงุฑ

#### ุตูุงุญูุงุช ุงููุณุชูุฏุงุช:
- `canManageDocuments`: ุฅุฏุงุฑุฉ ุงููุณุชูุฏุงุช
- `canViewDocuments`: ุนุฑุถ ุงููุณุชูุฏุงุช
- `canEditDocuments`: ุชุนุฏูู ุงููุณุชูุฏุงุช
- `canDeleteDocuments`: ุญุฐู ุงููุณุชูุฏุงุช
- `canUploadDocuments`: ุฑูุน ุงููุณุชูุฏุงุช

#### ุตูุงุญูุงุช ุงููุฑุงุฑุงุช:
- `canManageDecisions`: ุฅุฏุงุฑุฉ ุงููุฑุงุฑุงุช
- `canViewDecisions`: ุนุฑุถ ุงููุฑุงุฑุงุช
- `canCreateDecisions`: ุฅูุดุงุก ูุฑุงุฑุงุช
- `canEditDecisions`: ุชุนุฏูู ุงููุฑุงุฑุงุช
- `canDeleteDecisions`: ุญุฐู ุงููุฑุงุฑุงุช

#### ุตูุงุญูุงุช ุงูุฎุทุงุจุงุช:
- `canManageLetters`: ุฅุฏุงุฑุฉ ุงูุฎุทุงุจุงุช
- `canViewLetters`: ุนุฑุถ ุงูุฎุทุงุจุงุช
- `canCreateLetters`: ุฅูุดุงุก ุฎุทุงุจุงุช
- `canEditLetters`: ุชุนุฏูู ุงูุฎุทุงุจุงุช
- `canDeleteLetters`: ุญุฐู ุงูุฎุทุงุจุงุช

#### ุตูุงุญูุงุช ุฅุนุฏุงุฏุงุช ุงููุธุงู:
- `canManageSettings`: ุฅุฏุงุฑุฉ ุฅุนุฏุงุฏุงุช ุงููุธุงู
- `canViewSettings`: ุนุฑุถ ุงูุฅุนุฏุงุฏุงุช
- `canEditSettings`: ุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช

#### ุงูุตูุงุญูุงุช ุงูุนุงูุฉ:
- `isAdmin`: ุตูุงุญูุงุช ุงููุฏูุฑ ุงููุงููุฉ
- `isCommander`: ุตูุงุญูุงุช ุงููุงุฆุฏ
- `isSupervisor`: ุตูุงุญูุงุช ุงููุดุฑู
- `isUser`: ุตูุงุญูุงุช ุงููุณุชุฎุฏู ุงูุนุงุฏู

## ุงููุชูุฌุฉ

ุงูุขู ุงููุณุชุฎุฏู ุงูุงูุชุฑุงุถู (admin/123456) ูุฏูู ุฌููุน ุงูุตูุงุญูุงุช ุงููุทููุจุฉ ูููุตูู ุฅูู ุฌููุน ุฃูุณุงู ุงููุธุงู:

โ **ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู** - ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐูุ ุนุฑุถ ุงููุณุชุฎุฏููู  
โ **ุงูุชูุงุฑูุฑ** - ุฅูุดุงุกุ ูุฑุงุฌุนุฉุ ููุงููุฉุ ุฃุฑุดูุฉ ุงูุชูุงุฑูุฑ  
โ **ุงูุฅุฌุงุฒุงุช** - ุฅุฏุงุฑุฉุ ุทูุจุ ููุงููุฉุ ุญุฐู ุงูุฅุฌุงุฒุงุช  
โ **ุงูุฃุนุฐุงุฑ** - ุฅุฏุงุฑุฉุ ุทูุจุ ููุงููุฉ ุนูู ุงูุฃุนุฐุงุฑ  
โ **ุงููุณุชูุฏุงุช** - ุฅุฏุงุฑุฉุ ุฅูุดุงุกุ ุชุนุฏููุ ุญุฐู ุงููุณุชูุฏุงุช  
โ **ุงููุฑุงุฑุงุช** - ุฅุฏุงุฑุฉุ ุฅูุดุงุกุ ุชุนุฏููุ ุญุฐู ุงููุฑุงุฑุงุช  
โ **ุงูุฎุทุงุจุงุช** - ุฅุฏุงุฑุฉุ ุฅูุดุงุกุ ุชุนุฏููุ ุญุฐู ุงูุฎุทุงุจุงุช  
โ **ุฅุนุฏุงุฏุงุช ุงููุธุงู** - ุฅุฏุงุฑุฉ ุฌููุน ุฅุนุฏุงุฏุงุช ุงููุธุงู  

## ููููุฉ ุงูุงุณุชุฎุฏุงู

1. ุณุฌู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู:
   - **ุงุณู ุงููุณุชุฎุฏู**: admin
   - **ูููุฉ ุงููุฑูุฑ**: 123456

2. ุณุชุฌุฏ ุฌููุน ุงูุฃูุณุงู ูุชุงุญุฉ ูู ุงูุดุฑูุท ุงูุฌุงูุจู

3. ููููู ุงููุตูู ุฅูู ุฌููุน ุงููุธุงุฆู ุจุฏูู ูููุฏ

## ููุงุญุธุงุช ูููุฉ

- ูุฐู ุงูุตูุงุญูุงุช ูุฎุตุตุฉ ูููุณุชุฎุฏู ุงูุงูุชุฑุงุถู ููุท
- ุนูุฏ ุฅุถุงูุฉ ูุณุชุฎุฏููู ุฌุฏุฏุ ูููู ุชุญุฏูุฏ ุงูุตูุงุญูุงุช ุงูููุงุณุจุฉ ููู ูุณุชุฎุฏู
- ุงููุธุงู ูุฏุนู ูุธุงู ุตูุงุญูุงุช ูุฑู ูููู ุชุฎุตูุตู ุญุณุจ ุงุญุชูุงุฌุงุช ุงููุคุณุณุฉ 